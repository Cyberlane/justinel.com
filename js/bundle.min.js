/*! justinel.com | Justin Nel (c) 2017 */
"use strict";var searchArea=document.querySelector(".search"),searchInput=document.querySelector(".search input"),searchResults=document.querySelector(".search ul"),searchCache=[],clearResults=function(){searchResults.innerHTML=""},renderEmptyResults=function(){searchResults.innerHTML='<li><a href="#">No results.</a></li>'},filterSearchResults=function(e,r){var t=new RegExp("\\b"+r+"\\b","gi");return e.filter(function(e){return t.test(e.title)||t.test(e.content)?e:null})},renderSearchResults=function(e){return clearResults(),0===e.length?void renderEmptyResults():void e.map(function(e){return{url:e.url,title:e.title.replace(/\&amp\;/,"&")}}).map(function(e){return'<li>\n      <a href="'+e.url+'">'+e.title+"</a>\n    </li>"}).map(function(e){var r=document.createElement("div");return r.innerHTML=e,r.childNodes[0]}).forEach(function(e){return searchResults.appendChild(e)})},search=function(){var e=searchInput.value;return e?searchCache.length>0?void renderSearchResults(filterSearchResults(searchCache,e)):void fetch("/posts.json").then(function(e){return e.json()}).then(function(e){return searchCache=e,e}).then(function(r){return filterSearchResults(r,e)}).then(renderSearchResults):void clearResults()},isChild=function(e,r){for(var t=e.parentNode;null!==t;){if(t===r)return!0;t=t.parentNode}return!1},searchOffClick=function(e){isChild(e.target,searchArea)||clearResults()};searchInput.addEventListener("focus",search,!1),searchInput.addEventListener("input",function(){return search()},!1),searchArea.addEventListener("submit",function(e){return e.preventDefault()},!1),document.addEventListener("click",searchOffClick,!1);